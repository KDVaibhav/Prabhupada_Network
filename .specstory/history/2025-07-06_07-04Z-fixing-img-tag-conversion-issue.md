<!-- Generated by SpecStory -->

# Fixing img tag conversion issue (2025-07-06 07:04Z)

_**User**_

This section is replacing my base64image to a url, but the issue is that it converts the img tag to a para tag, due to that I am not able to render my images

---

_**Assistant**_

The issue you're describing occurs because the `content.replace` method in the `BlogEditor.tsx` file is not preserving the `<img>` tag structure when replacing the `src` attribute. Instead, it might be converting the `<img>` tag into a `<p>` tag or another unintended format, which prevents the images from rendering correctly.

### Solution
To fix this, we need to ensure that the `replace` method preserves the `<img>` tag structure while only updating the `src` attribute. Here's the corrected version of the problematic section:

```typescript:frontend-main/src/components/ui/BlogEditor.tsx
// ... existing code ...
const finalContent = content.replace(
  /<img([^>]+)src="(data:image\/[^">]+)"/g,
  (match, attributes, base64) => {
    const url = uploadedImages[base64];
    return url ? `<img${attributes}src="${url}"` : match;
  }
);
// ... existing code ...
```

### Explanation of Changes:
1. **Regex Update**:
   - The regex now captures the entire `<img` tag attributes (`[^>]+`) separately from the `src` attribute. This ensures we preserve all other attributes (e.g., `alt`, `class`, etc.) in the tag.
   - The `src` attribute is still captured to map it to the uploaded URL.

2. **Replacement Logic**:
   - The replacement function now reconstructs the `<img>` tag with the original attributes (`attributes`) and the new `src` URL (`url`).
   - If no URL is found in `uploadedImages`, the original match is returned unchanged.

### Why This Works:
- The updated regex ensures that the entire `<img>` tag structure is preserved, including any additional attributes.
- The replacement logic explicitly reconstructs the `<img>` tag with the new `src` URL, avoiding unintended conversions to other tags (e.g., `<p>`).

### Testing:
After making this change, test the following:
1. Upload a blog post with embedded images.
2. Verify that the images are rendered correctly in the preview and after submission.
3. Check the HTML structure of the submitted content to ensure `<img>` tags are preserved.

Let me know if you encounter any further issues!

---

